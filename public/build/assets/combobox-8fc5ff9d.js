import{o as G,c as Q,b as W,r as V,f as O,E as L,Q as g,R as te,h as z,g as q,G as J,F as oe,S as H,H as ae,U as le,L as F}from"./app-d65bb1cc.js";import{f as A,x as ne,g as C,o as h,F as ue,i as ie,l as K,j as re,K as se,k as ve,H as j,T as X,t as _,m as de,N as U,p as pe,n as ce,q as be,O as fe,s as w,v as me,w as xe}from"./index-43d6a316.js";function Ie(t,n){return G(),Q("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[W("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"})])}function Pe(t,n){return G(),Q("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[W("path",{"fill-rule":"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z","clip-rule":"evenodd"})])}function Y(t={},n=null,u=[]){for(let[y,e]of Object.entries(t))$(u,Z(n,y),e);return u}function Z(t,n){return t?t+"["+n+"]":n}function $(t,n,u){if(Array.isArray(u))for(let[y,e]of u.entries())$(t,Z(n,y.toString()),e);else u instanceof Date?t.push([n,u.toISOString()]):typeof u=="boolean"?t.push([n,u?"1":"0"]):typeof u=="string"?t.push([n,u]):typeof u=="number"?t.push([n,`${u}`]):u==null?t.push([n,""]):Y(u,n,t)}function ge(t,n,u){let y=V(u==null?void 0:u.value),e=O(()=>t.value!==void 0);return[O(()=>e.value?t.value:y.value),function(o){return e.value||(y.value=o),n==null?void 0:n(o)}]}function Oe(t,n){return t===n}var ye=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(ye||{}),Se=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(Se||{}),Re=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Re||{});let ee=Symbol("ComboboxContext");function N(t){let n=le(ee,null);if(n===null){let u=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(u,N),u}return n}let Te=L({name:"Combobox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Oe},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:n,attrs:u,emit:y}){let e=V(1),o=V(null),d=V(null),I=V(null),r=V(null),b=V({static:!1,hold:!1}),x=V([]),S=V(null),P=V(1),T=V(!1);function E(l=v=>v){let v=S.value!==null?x.value[S.value]:null,c=fe(l(x.value.slice()),f=>h(f.dataRef.domRef)),i=v?c.indexOf(v):null;return i===-1&&(i=null),{options:c,activeOptionIndex:i}}let k=O(()=>t.multiple?1:0),a=O(()=>t.nullable),[p,m]=ge(O(()=>t.modelValue===void 0?A(k.value,{[1]:[],[0]:void 0}):t.modelValue),l=>y("update:modelValue",l),O(()=>t.defaultValue)),s={comboboxState:e,value:p,mode:k,compare(l,v){if(typeof t.by=="string"){let c=t.by;return(l==null?void 0:l[c])===(v==null?void 0:v[c])}return t.by(l,v)},defaultValue:O(()=>t.defaultValue),nullable:a,inputRef:d,labelRef:o,buttonRef:I,optionsRef:r,disabled:O(()=>t.disabled),options:x,change(l){m(l)},activeOptionIndex:O(()=>{if(T.value&&S.value===null&&x.value.length>0){let l=x.value.findIndex(v=>!v.dataRef.disabled);l!==-1&&(S.value=l)}return S.value}),activationTrigger:P,optionsPropsRef:b,closeCombobox(){T.value=!1,!t.disabled&&e.value!==1&&(e.value=1,S.value=null)},openCombobox(){if(T.value=!0,t.disabled||e.value===0)return;let l=x.value.findIndex(v=>{let c=g(v.dataRef.value);return A(k.value,{[0]:()=>s.compare(g(s.value.value),g(c)),[1]:()=>g(s.value.value).some(i=>s.compare(g(i),g(c)))})});l!==-1&&(S.value=l),e.value=0},goToOption(l,v,c){if(T.value=!1,t.disabled||r.value&&!b.value.static&&e.value===1)return;let i=E();if(i.activeOptionIndex===null){let R=i.options.findIndex(M=>!M.dataRef.disabled);R!==-1&&(i.activeOptionIndex=R)}let f=ne(l===C.Specific?{focus:C.Specific,id:v}:{focus:l},{resolveItems:()=>i.options,resolveActiveIndex:()=>i.activeOptionIndex,resolveId:R=>R.id,resolveDisabled:R=>R.dataRef.disabled});S.value=f,P.value=c??1,x.value=i.options},selectOption(l){let v=x.value.find(i=>i.id===l);if(!v)return;let{dataRef:c}=v;m(A(k.value,{[0]:()=>c.value,[1]:()=>{let i=g(s.value.value).slice(),f=g(c.value),R=i.findIndex(M=>s.compare(f,g(M)));return R===-1?i.push(f):i.splice(R,1),i}}))},selectActiveOption(){if(s.activeOptionIndex.value===null)return;let{dataRef:l,id:v}=x.value[s.activeOptionIndex.value];m(A(k.value,{[0]:()=>l.value,[1]:()=>{let c=g(s.value.value).slice(),i=g(l.value),f=c.findIndex(R=>s.compare(i,g(R)));return f===-1?c.push(i):c.splice(f,1),c}})),s.goToOption(C.Specific,v)},registerOption(l,v){let c={id:l,dataRef:v},i=E(f=>[...f,c]);if(S.value===null){let f=v.value.value;A(k.value,{[0]:()=>s.compare(g(s.value.value),g(f)),[1]:()=>g(s.value.value).some(R=>s.compare(g(R),g(f)))})&&(i.activeOptionIndex=i.options.indexOf(c))}x.value=i.options,S.value=i.activeOptionIndex,P.value=1,i.options.some(f=>!h(f.dataRef.domRef))&&requestAnimationFrame(()=>{let f=E();x.value=f.options,S.value=f.activeOptionIndex})},unregisterOption(l){var v;s.activeOptionIndex.value!==null&&((v=s.options.value[s.activeOptionIndex.value])==null?void 0:v.id)===l&&(T.value=!0);let c=E(i=>{let f=i.findIndex(R=>R.id===l);return f!==-1&&i.splice(f,1),i});x.value=c.options,S.value=c.activeOptionIndex,P.value=1}};ue([d,I,r],()=>s.closeCombobox(),O(()=>e.value===0)),te(ee,s),ie(O(()=>A(e.value,{[0]:K.Open,[1]:K.Closed})));let D=O(()=>s.activeOptionIndex.value===null?null:x.value[s.activeOptionIndex.value].dataRef.value),B=O(()=>{var l;return(l=h(d))==null?void 0:l.closest("form")});return z(()=>{q([B],()=>{if(!B.value||t.defaultValue===void 0)return;function l(){s.change(t.defaultValue)}return B.value.addEventListener("reset",l),()=>{var v;(v=B.value)==null||v.removeEventListener("reset",l)}},{immediate:!0})}),()=>{let{name:l,disabled:v,form:c,...i}=t,f={open:e.value===0,disabled:v,activeIndex:s.activeOptionIndex.value,activeOption:D.value,value:p.value};return J(oe,[...l!=null&&p.value!=null?Y({[l]:p.value}).map(([R,M])=>J(re,se({features:ve.Hidden,key:R,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:c,name:R,value:M}))):[],j({theirProps:{...u,...X(i,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:f,slots:n,attrs:u,name:"Combobox"})])}}}),we=L({name:"ComboboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:()=>`headlessui-combobox-label-${_()}`}},setup(t,{attrs:n,slots:u}){let y=N("ComboboxLabel");function e(){var o;(o=h(y.inputRef))==null||o.focus({preventScroll:!0})}return()=>{let o={open:y.comboboxState.value===0,disabled:y.disabled.value},{id:d,...I}=t,r={id:d,ref:y.labelRef,onClick:e};return j({ourProps:r,theirProps:I,slot:o,attrs:n,slots:u,name:"ComboboxLabel"})}}}),Ve=L({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${_()}`}},setup(t,{attrs:n,slots:u,expose:y}){let e=N("ComboboxButton");y({el:e.buttonRef,$el:e.buttonRef});function o(r){e.disabled.value||(e.comboboxState.value===0?e.closeCombobox():(r.preventDefault(),e.openCombobox()),F(()=>{var b;return(b=h(e.inputRef))==null?void 0:b.focus({preventScroll:!0})}))}function d(r){switch(r.key){case w.ArrowDown:r.preventDefault(),r.stopPropagation(),e.comboboxState.value===1&&e.openCombobox(),F(()=>{var b;return(b=e.inputRef.value)==null?void 0:b.focus({preventScroll:!0})});return;case w.ArrowUp:r.preventDefault(),r.stopPropagation(),e.comboboxState.value===1&&(e.openCombobox(),F(()=>{e.value.value||e.goToOption(C.Last)})),F(()=>{var b;return(b=e.inputRef.value)==null?void 0:b.focus({preventScroll:!0})});return;case w.Escape:if(e.comboboxState.value!==0)return;r.preventDefault(),e.optionsRef.value&&!e.optionsPropsRef.value.static&&r.stopPropagation(),e.closeCombobox(),F(()=>{var b;return(b=e.inputRef.value)==null?void 0:b.focus({preventScroll:!0})});return}}let I=de(O(()=>({as:t.as,type:n.type})),e.buttonRef);return()=>{var r,b;let x={open:e.comboboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:S,...P}=t,T={ref:e.buttonRef,id:S,type:I.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(r=h(e.optionsRef))==null?void 0:r.id,"aria-expanded":e.disabled.value?void 0:e.comboboxState.value===0,"aria-labelledby":e.labelRef.value?[(b=h(e.labelRef))==null?void 0:b.id,S].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:d,onClick:o};return j({ourProps:T,theirProps:P,slot:x,attrs:n,slots:u,name:"ComboboxButton"})}}}),ke=L({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${_()}`}},emits:{change:t=>!0},setup(t,{emit:n,attrs:u,slots:y,expose:e}){let o=N("ComboboxInput"),d={value:!1};e({el:o.inputRef,$el:o.inputRef});let I=O(()=>{var a;let p=o.value.value;return h(o.inputRef)?typeof t.displayValue<"u"&&p!==void 0?(a=t.displayValue(p))!=null?a:"":typeof p=="string"?p:"":""});z(()=>{q([I,o.comboboxState],([a,p],[m,s])=>{if(d.value)return;let D=h(o.inputRef);D&&(s===0&&p===1||a!==m)&&(D.value=a)},{immediate:!0}),q([o.comboboxState],([a],[p])=>{if(a===0&&p===1){let m=h(o.inputRef);if(!m)return;let s=m.value,{selectionStart:D,selectionEnd:B,selectionDirection:l}=m;m.value="",m.value=s,l!==null?m.setSelectionRange(D,B,l):m.setSelectionRange(D,B)}})});let r=V(!1),b=V(null);function x(){r.value=!0}function S(){me().nextFrame(()=>{r.value=!1,b.value&&(o.openCombobox(),n("change",b.value),b.value=null)})}function P(a){switch(d.value=!0,a.key){case w.Backspace:case w.Delete:if(o.mode.value!==0||!o.nullable.value)return;let p=a.currentTarget;requestAnimationFrame(()=>{if(p.value===""){o.change(null);let m=h(o.optionsRef);m&&(m.scrollTop=0),o.goToOption(C.Nothing)}});break;case w.Enter:if(d.value=!1,o.comboboxState.value!==0||r.value)return;if(a.preventDefault(),a.stopPropagation(),o.activeOptionIndex.value===null){o.closeCombobox();return}o.selectActiveOption(),o.mode.value===0&&o.closeCombobox();break;case w.ArrowDown:return d.value=!1,a.preventDefault(),a.stopPropagation(),A(o.comboboxState.value,{[0]:()=>o.goToOption(C.Next),[1]:()=>o.openCombobox()});case w.ArrowUp:return d.value=!1,a.preventDefault(),a.stopPropagation(),A(o.comboboxState.value,{[0]:()=>o.goToOption(C.Previous),[1]:()=>{o.openCombobox(),F(()=>{o.value.value||o.goToOption(C.Last)})}});case w.Home:if(a.shiftKey)break;return d.value=!1,a.preventDefault(),a.stopPropagation(),o.goToOption(C.First);case w.PageUp:return d.value=!1,a.preventDefault(),a.stopPropagation(),o.goToOption(C.First);case w.End:if(a.shiftKey)break;return d.value=!1,a.preventDefault(),a.stopPropagation(),o.goToOption(C.Last);case w.PageDown:return d.value=!1,a.preventDefault(),a.stopPropagation(),o.goToOption(C.Last);case w.Escape:if(d.value=!1,o.comboboxState.value!==0)return;a.preventDefault(),o.optionsRef.value&&!o.optionsPropsRef.value.static&&a.stopPropagation(),o.closeCombobox();break;case w.Tab:if(d.value=!1,o.comboboxState.value!==0)return;o.mode.value===0&&o.selectActiveOption(),o.closeCombobox();break}}function T(a){if(r.value){b.value=a;return}o.openCombobox(),n("change",a)}function E(){d.value=!1}let k=O(()=>{var a,p,m,s;return(s=(m=(p=t.defaultValue)!=null?p:o.defaultValue.value!==void 0?(a=t.displayValue)==null?void 0:a.call(t,o.defaultValue.value):null)!=null?m:o.defaultValue.value)!=null?s:""});return()=>{var a,p,m,s,D,B;let l={open:o.comboboxState.value===0},{id:v,displayValue:c,onChange:i,...f}=t,R={"aria-controls":(a=o.optionsRef.value)==null?void 0:a.id,"aria-expanded":o.disabled.value?void 0:o.comboboxState.value===0,"aria-activedescendant":o.activeOptionIndex.value===null||(p=o.options.value[o.activeOptionIndex.value])==null?void 0:p.id,"aria-labelledby":(D=(m=h(o.labelRef))==null?void 0:m.id)!=null?D:(s=h(o.buttonRef))==null?void 0:s.id,"aria-autocomplete":"list",id:v,onCompositionstart:x,onCompositionend:S,onKeydown:P,onInput:T,onBlur:E,role:"combobox",type:(B=u.type)!=null?B:"text",tabIndex:0,ref:o.inputRef,defaultValue:k.value,disabled:o.disabled.value===!0?!0:void 0};return j({ourProps:R,theirProps:f,slot:l,attrs:u,slots:y,features:U.RenderStrategy|U.Static,name:"ComboboxInput"})}}}),De=L({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(t,{attrs:n,slots:u,expose:y}){let e=N("ComboboxOptions"),o=`headlessui-combobox-options-${_()}`;y({el:e.optionsRef,$el:e.optionsRef}),H(()=>{e.optionsPropsRef.value.static=t.static}),H(()=>{e.optionsPropsRef.value.hold=t.hold});let d=pe(),I=O(()=>d!==null?(d.value&K.Open)===K.Open:e.comboboxState.value===0);return ce({container:O(()=>h(e.optionsRef)),enabled:O(()=>e.comboboxState.value===0),accept(r){return r.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:r.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(r){r.setAttribute("role","none")}}),()=>{var r,b,x;let S={open:e.comboboxState.value===0},P={"aria-labelledby":(x=(r=h(e.labelRef))==null?void 0:r.id)!=null?x:(b=h(e.buttonRef))==null?void 0:b.id,id:o,ref:e.optionsRef,role:"listbox","aria-multiselectable":e.mode.value===1?!0:void 0},T=X(t,["hold"]);return j({ourProps:P,theirProps:T,slot:S,attrs:n,slots:u,features:U.RenderStrategy|U.Static,visible:I.value,name:"ComboboxOptions"})}}}),Be=L({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(t,{slots:n,attrs:u,expose:y}){let e=N("ComboboxOption"),o=`headlessui-combobox-option-${_()}`,d=V(null);y({el:d,$el:d});let I=O(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===o:!1),r=O(()=>A(e.mode.value,{[0]:()=>e.compare(g(e.value.value),g(t.value)),[1]:()=>g(e.value.value).some(a=>e.compare(g(a),g(t.value)))})),b=O(()=>({disabled:t.disabled,value:t.value,domRef:d}));z(()=>e.registerOption(o,b)),ae(()=>e.unregisterOption(o)),H(()=>{e.comboboxState.value===0&&I.value&&e.activationTrigger.value!==0&&F(()=>{var a,p;return(p=(a=h(d))==null?void 0:a.scrollIntoView)==null?void 0:p.call(a,{block:"nearest"})})});function x(a){if(t.disabled)return a.preventDefault();e.selectOption(o),e.mode.value===0&&e.closeCombobox(),xe()||requestAnimationFrame(()=>{var p;return(p=h(e.inputRef))==null?void 0:p.focus()})}function S(){if(t.disabled)return e.goToOption(C.Nothing);e.goToOption(C.Specific,o)}let P=be();function T(a){P.update(a)}function E(a){P.wasMoved(a)&&(t.disabled||I.value||e.goToOption(C.Specific,o,0))}function k(a){P.wasMoved(a)&&(t.disabled||I.value&&(e.optionsPropsRef.value.hold||e.goToOption(C.Nothing)))}return()=>{let{disabled:a}=t,p={active:I.value,selected:r.value,disabled:a},m={id:o,ref:d,role:"option",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-selected":r.value,disabled:void 0,onClick:x,onFocus:S,onPointerenter:T,onMouseenter:T,onPointermove:E,onMousemove:E,onPointerleave:k,onMouseleave:k};return j({ourProps:m,theirProps:t,slot:p,attrs:u,slots:n,name:"ComboboxOption"})}}});export{we as $,Be as J,Te as K,Ve as U,ke as _,Ie as a,De as q,Pe as r};
