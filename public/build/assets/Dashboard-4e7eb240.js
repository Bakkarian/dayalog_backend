import{x as we,y as _e,r as V,h as xe,K as he,f as ne,g as $e,o as z,c as Y,a as T,u as M,b as t,i as B,F as ie,k as oe,t as F,z as fe,e as pe,Z as ke,s as le,n as re,l as ce,A as ge,j as me,B as Me}from"./app-d65bb1cc.js";import{_ as be}from"./LOGO-cea72a23.js";import{_ as De}from"./_plugin-vue_export-helper-c27b6911.js";import{u as Se,U as Ie,h as ue,G as Ce,r as ve,S as Te,a as Oe,b as Ae,c as Ee,R as je,d as Le,e as Ne,y as ze,M as Be}from"./index-43d6a316.js";const He={};function Fe(w,a){return we(w.$slots,"default")}const Re=De(He,[["render",Fe]]);var Ue={exports:{}};(function(w,a){(function(o,b){w.exports=b()})(_e,function(){var o=1e3,b=6e4,y=36e5,p="millisecond",S="second",I="minute",_="hour",h="day",$="week",v="month",k="quarter",C="year",j="date",H="Invalid Date",P=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,U=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,K={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(l){var i=["th","st","nd","rd"],e=l%100;return"["+l+(i[(e-20)%10]||i[e]||i[0])+"]"}},L=function(l,i,e){var n=String(l);return!n||n.length>=i?l:""+Array(i+1-n.length).join(e)+l},G={s:L,z:function(l){var i=-l.utcOffset(),e=Math.abs(i),n=Math.floor(e/60),s=e%60;return(i<=0?"+":"-")+L(n,2,"0")+":"+L(s,2,"0")},m:function l(i,e){if(i.date()<e.date())return-l(e,i);var n=12*(e.year()-i.year())+(e.month()-i.month()),s=i.clone().add(n,v),c=e-s<0,u=i.clone().add(n+(c?-1:1),v);return+(-(n+(e-s)/(c?s-u:u-s))||0)},a:function(l){return l<0?Math.ceil(l)||0:Math.floor(l)},p:function(l){return{M:v,y:C,w:$,d:h,D:j,h:_,m:I,s:S,ms:p,Q:k}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(l){return l===void 0}},A="en",d={};d[A]=K;var m=function(l){return l instanceof X},r=function l(i,e,n){var s;if(!i)return A;if(typeof i=="string"){var c=i.toLowerCase();d[c]&&(s=c),e&&(d[c]=e,s=c);var u=i.split("-");if(!s&&u.length>1)return l(u[0])}else{var x=i.name;d[x]=i,s=x}return!n&&s&&(A=s),s||!n&&A},g=function(l,i){if(m(l))return l.clone();var e=typeof i=="object"?i:{};return e.date=l,e.args=arguments,new X(e)},f=G;f.l=r,f.i=m,f.w=function(l,i){return g(l,{locale:i.$L,utc:i.$u,x:i.$x,$offset:i.$offset})};var X=function(){function l(e){this.$L=r(e.locale,null,!0),this.parse(e)}var i=l.prototype;return i.parse=function(e){this.$d=function(n){var s=n.date,c=n.utc;if(s===null)return new Date(NaN);if(f.u(s))return new Date;if(s instanceof Date)return new Date(s);if(typeof s=="string"&&!/Z$/i.test(s)){var u=s.match(P);if(u){var x=u[2]-1||0,D=(u[7]||"0").substring(0,3);return c?new Date(Date.UTC(u[1],x,u[3]||1,u[4]||0,u[5]||0,u[6]||0,D)):new Date(u[1],x,u[3]||1,u[4]||0,u[5]||0,u[6]||0,D)}}return new Date(s)}(e),this.$x=e.x||{},this.init()},i.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},i.$utils=function(){return f},i.isValid=function(){return this.$d.toString()!==H},i.isSame=function(e,n){var s=g(e);return this.startOf(n)<=s&&s<=this.endOf(n)},i.isAfter=function(e,n){return g(e)<this.startOf(n)},i.isBefore=function(e,n){return this.endOf(n)<g(e)},i.$g=function(e,n,s){return f.u(e)?this[n]:this.set(s,e)},i.unix=function(){return Math.floor(this.valueOf()/1e3)},i.valueOf=function(){return this.$d.getTime()},i.startOf=function(e,n){var s=this,c=!!f.u(n)||n,u=f.p(e),x=function(J,N){var Z=f.w(s.$u?Date.UTC(s.$y,N,J):new Date(s.$y,N,J),s);return c?Z:Z.endOf(h)},D=function(J,N){return f.w(s.toDate()[J].apply(s.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(N)),s)},O=this.$W,E=this.$M,R=this.$D,Q="set"+(this.$u?"UTC":"");switch(u){case C:return c?x(1,0):x(31,11);case v:return c?x(1,E):x(0,E+1);case $:var W=this.$locale().weekStart||0,te=(O<W?O+7:O)-W;return x(c?R-te:R+(6-te),E);case h:case j:return D(Q+"Hours",0);case _:return D(Q+"Minutes",1);case I:return D(Q+"Seconds",2);case S:return D(Q+"Milliseconds",3);default:return this.clone()}},i.endOf=function(e){return this.startOf(e,!1)},i.$set=function(e,n){var s,c=f.p(e),u="set"+(this.$u?"UTC":""),x=(s={},s[h]=u+"Date",s[j]=u+"Date",s[v]=u+"Month",s[C]=u+"FullYear",s[_]=u+"Hours",s[I]=u+"Minutes",s[S]=u+"Seconds",s[p]=u+"Milliseconds",s)[c],D=c===h?this.$D+(n-this.$W):n;if(c===v||c===C){var O=this.clone().set(j,1);O.$d[x](D),O.init(),this.$d=O.set(j,Math.min(this.$D,O.daysInMonth())).$d}else x&&this.$d[x](D);return this.init(),this},i.set=function(e,n){return this.clone().$set(e,n)},i.get=function(e){return this[f.p(e)]()},i.add=function(e,n){var s,c=this;e=Number(e);var u=f.p(n),x=function(E){var R=g(c);return f.w(R.date(R.date()+Math.round(E*e)),c)};if(u===v)return this.set(v,this.$M+e);if(u===C)return this.set(C,this.$y+e);if(u===h)return x(1);if(u===$)return x(7);var D=(s={},s[I]=b,s[_]=y,s[S]=o,s)[u]||1,O=this.$d.getTime()+e*D;return f.w(O,this)},i.subtract=function(e,n){return this.add(-1*e,n)},i.format=function(e){var n=this,s=this.$locale();if(!this.isValid())return s.invalidDate||H;var c=e||"YYYY-MM-DDTHH:mm:ssZ",u=f.z(this),x=this.$H,D=this.$m,O=this.$M,E=s.weekdays,R=s.months,Q=s.meridiem,W=function(N,Z,se,ae){return N&&(N[Z]||N(n,c))||se[Z].slice(0,ae)},te=function(N){return f.s(x%12||12,N,"0")},J=Q||function(N,Z,se){var ae=N<12?"AM":"PM";return se?ae.toLowerCase():ae};return c.replace(U,function(N,Z){return Z||function(se){switch(se){case"YY":return String(n.$y).slice(-2);case"YYYY":return f.s(n.$y,4,"0");case"M":return O+1;case"MM":return f.s(O+1,2,"0");case"MMM":return W(s.monthsShort,O,R,3);case"MMMM":return W(R,O);case"D":return n.$D;case"DD":return f.s(n.$D,2,"0");case"d":return String(n.$W);case"dd":return W(s.weekdaysMin,n.$W,E,2);case"ddd":return W(s.weekdaysShort,n.$W,E,3);case"dddd":return E[n.$W];case"H":return String(x);case"HH":return f.s(x,2,"0");case"h":return te(1);case"hh":return te(2);case"a":return J(x,D,!0);case"A":return J(x,D,!1);case"m":return String(D);case"mm":return f.s(D,2,"0");case"s":return String(n.$s);case"ss":return f.s(n.$s,2,"0");case"SSS":return f.s(n.$ms,3,"0");case"Z":return u}return null}(N)||u.replace(":","")})},i.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},i.diff=function(e,n,s){var c,u=this,x=f.p(n),D=g(e),O=(D.utcOffset()-this.utcOffset())*b,E=this-D,R=function(){return f.m(u,D)};switch(x){case C:c=R()/12;break;case v:c=R();break;case k:c=R()/3;break;case $:c=(E-O)/6048e5;break;case h:c=(E-O)/864e5;break;case _:c=E/y;break;case I:c=E/b;break;case S:c=E/o;break;default:c=E}return s?c:f.a(c)},i.daysInMonth=function(){return this.endOf(v).$D},i.$locale=function(){return d[this.$L]},i.locale=function(e,n){if(!e)return this.$L;var s=this.clone(),c=r(e,n,!0);return c&&(s.$L=c),s},i.clone=function(){return f.w(this.$d,this)},i.toDate=function(){return new Date(this.valueOf())},i.toJSON=function(){return this.isValid()?this.toISOString():null},i.toISOString=function(){return this.$d.toISOString()},i.toString=function(){return this.$d.toUTCString()},l}(),de=X.prototype;return g.prototype=de,[["$ms",p],["$s",S],["$m",I],["$H",_],["$W",h],["$M",v],["$y",C],["$D",j]].forEach(function(l){de[l[1]]=function(i){return this.$g(i,l[0],l[1])}}),g.extend=function(l,i){return l.$i||(l(i,X,g),l.$i=!0),g},g.locale=r,g.isDayjs=m,g.unix=function(l){return g(1e3*l)},g.en=d[A],g.Ls=d,g.p={},g})})(Ue);var Ke={exports:{}};(function(w,a){(function(o,b){w.exports=b()})(_e,function(){return function(o,b,y){o=o||{};var p=b.prototype,S={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function I(h,$,v,k){return p.fromToBase(h,$,v,k)}y.en.relativeTime=S,p.fromToBase=function(h,$,v,k,C){for(var j,H,P,U=v.$locale().relativeTime||S,K=o.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],L=K.length,G=0;G<L;G+=1){var A=K[G];A.d&&(j=k?y(h).diff(v,A.d,!0):v.diff(h,A.d,!0));var d=(o.rounding||Math.round)(Math.abs(j));if(P=j>0,d<=A.r||!A.r){d<=1&&G>0&&(A=K[G-1]);var m=U[A.l];C&&(d=C(""+d)),H=typeof m=="string"?m.replace("%d",d):m(d,$,A.l,P);break}}if($)return H;var r=P?U.future:U.past;return typeof r=="function"?r(H):r.replace("%s",H)},p.to=function(h,$){return I(h,$,this,!0)},p.from=function(h,$){return I(h,$,this)};var _=function(h){return h.$u?y.utc():y()};p.toNow=function(h){return this.to(_(this),h)},p.fromNow=function(h){return this.from(_(this),h)}}})})(Ke);var Ye=function w(a,o){if(a===o)return!0;if(a&&o&&typeof a=="object"&&typeof o=="object"){if(a.constructor!==o.constructor)return!1;var b,y,p;if(Array.isArray(a)){if(b=a.length,b!=o.length)return!1;for(y=b;y--!==0;)if(!w(a[y],o[y]))return!1;return!0}if(a.constructor===RegExp)return a.source===o.source&&a.flags===o.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===o.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===o.toString();if(p=Object.keys(a),b=p.length,b!==Object.keys(o).length)return!1;for(y=b;y--!==0;)if(!Object.prototype.hasOwnProperty.call(o,p[y]))return!1;for(y=b;y--!==0;){var S=p[y];if(!w(a[S],o[S]))return!1}return!0}return a!==a&&o!==o};const ye="__googleMapsScriptId";var ee;(function(w){w[w.INITIALIZED=0]="INITIALIZED",w[w.LOADING=1]="LOADING",w[w.SUCCESS=2]="SUCCESS",w[w.FAILURE=3]="FAILURE"})(ee||(ee={}));class q{constructor({apiKey:a,authReferrerPolicy:o,channel:b,client:y,id:p=ye,language:S,libraries:I=[],mapIds:_,nonce:h,region:$,retries:v=3,url:k="https://maps.googleapis.com/maps/api/js",version:C}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=a,this.authReferrerPolicy=o,this.channel=b,this.client=y,this.id=p||ye,this.language=S,this.libraries=I,this.mapIds=_,this.nonce=h,this.region=$,this.retries=v,this.url=k,this.version=C,q.instance){if(!Ye(this.options,q.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(q.instance.options)}`);return q.instance}q.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?ee.FAILURE:this.done?ee.SUCCESS:this.loading?ee.LOADING:ee.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let a=this.url;return a+=`?callback=${this.CALLBACK}`,this.apiKey&&(a+=`&key=${this.apiKey}`),this.channel&&(a+=`&channel=${this.channel}`),this.client&&(a+=`&client=${this.client}`),this.libraries.length>0&&(a+=`&libraries=${this.libraries.join(",")}`),this.language&&(a+=`&language=${this.language}`),this.region&&(a+=`&region=${this.region}`),this.version&&(a+=`&v=${this.version}`),this.mapIds&&(a+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(a+=`&auth_referrer_policy=${this.authReferrerPolicy}`),a}deleteScript(){const a=document.getElementById(this.id);a&&a.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((a,o)=>{this.loadCallback(b=>{b?o(b.error):a(window.google)})})}loadCallback(a){this.callbacks.push(a),this.execute()}setScript(){if(document.getElementById(this.id)){this.callback();return}const a=this.createUrl(),o=document.createElement("script");o.id=this.id,o.type="text/javascript",o.src=a,o.onerror=this.loadErrorCallback.bind(this),o.defer=!0,o.async=!0,this.nonce&&(o.nonce=this.nonce),document.head.appendChild(o)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(a){if(this.errors.push(a),this.errors.length<=this.retries){const o=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${o} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},o)}else this.onerrorEvent=a,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(a=>{a(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}const Ge="/build/assets/marker-6b289b1b.png";function Ve(){const w=V([]),a=V([]);return xe(()=>{var o="http://127.0.0.1:8082",b="SDBGAiEAzjBFq8XCaRKG2u_wLzVwEC-Ls1WAeivIfqTdDzQAxMcCIQC_1Ye4k6oaNHiJ1FZIoJVeKxpKuKtdFhu-kKGmwZjp0XsidSI6MSwiZSI6IjIwMjUtMDEtMTJUMjE6MDA6MDAuMDAwKzAwOjAwIn0",y=function(p,S,I){var _=new XMLHttpRequest;_.withCredentials=!0,_.open(p,S,!0),_.onreadystatechange=function(){_.readyState==4&&I(JSON.parse(_.responseText))},p=="POST"&&_.setRequestHeader("Content-type","application/json"),_.send()};y("GET",o+"/api/session?token="+b,function(p){y("GET",o+"/api/devices",function(S){var I=new WebSocket("ws"+o.substring(4)+"/api/socket");I.onopen=()=>{console.log("Connected to websocket Successfully")},I.onerror=_=>{console.log("socket error: ",_)},I.onclose=function(_){},I.onmessage=function(_){var h=JSON.parse(_.data);if("positions"in h){const $=h.positions.reduce((k,C)=>{const j=k.find(H=>H.deviceId===C.deviceId);return(!j||C.id>j.id)&&(k=k.filter(H=>H.deviceId!==C.deviceId),k.push(C)),k},[]);let v=new Set($.map(k=>k.deviceId));w.value=[...w.value.filter(k=>!v.has(k.deviceId)),...$]}if("devices"in h){let $=new Set(h.devices.map(v=>v.id));a.value=[...a.value.filter(v=>!$.has(v.id)),...h.devices]}}})})}),{positions:w,devices:a}}const Ze={class:""},Pe={class:"absolute top-0 bottom-0 right-0 left-0 lg:left-[350px]"},We=t("div",{class:"bg-gradient-to-r from-gray-100 lg:left-[350px] top-0 bottom-0 w-[50px] absolute"},null,-1),Je={class:"absolute right-0 left-0"},qe=t("div",{class:"fixed inset-0 bg-gray-900/80"},null,-1),Xe={class:"fixed inset-0 flex"},Qe={class:"absolute left-full top-0 flex w-16 justify-center pt-5"},et=t("span",{class:"sr-only"},"Close sidebar",-1),tt={class:"flex grow flex-col gap-y-5 overflow-y-auto bg-gray-900 px-6 pb-2 ring-1 ring-white/10"},st=t("div",{class:"flex h-16 shrink-0 items-center"},[t("img",{class:"h-8 w-auto",src:be,alt:"Dayalog"})],-1),it={class:"flex flex-1 flex-col"},rt={role:"list",class:"-mx-2 flex-1 space-y-1"},at={class:"hidden lg:fixed lg:inset-y-0 lg:left-0 lg:z-50 lg:block lg:w-20 lg:overflow-y-auto lg:bg-[#002760] lg:pb-4 rounded-lg m-4 animate__animated animate__fadeInLeft animate__faster"},nt=t("div",{class:"flex h-16 shrink-0 items-center justify-center"},[t("img",{class:"h-8 w-auto",src:be,alt:"Dayalog"})],-1),ot={class:"mt-8"},lt={role:"list",class:"flex flex-col items-center space-y-1"},ct={class:"sr-only"},ut={class:"lg:pl-20"},dt={class:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-md sm:gap-x-6 sm:px-6 lg:px-8 lg:my-4 mr-4 ml-8 rounded-lg animate__animated animate__fadeInDown"},ht=t("span",{class:"sr-only"},"Open sidebar",-1),ft=t("div",{class:"h-6 w-px bg-gray-900/10 lg:hidden","aria-hidden":"true"},null,-1),pt={class:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6"},gt={class:"relative flex flex-1",action:"#",method:"GET"},mt=t("label",{for:"search-field",class:"sr-only"},"Search",-1),vt=t("input",{id:"search-field",class:"block h-full w-full border-0 py-0 pl-8 pr-0 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm",placeholder:"Search...",type:"search",name:"search"},null,-1),yt={class:"flex items-center gap-x-4 lg:gap-x-6"},_t={type:"button",class:"-m-2.5 p-2.5 text-gray-400 hover:text-gray-500"},xt=t("span",{class:"sr-only"},"View notifications",-1),bt=t("div",{class:"hidden lg:block lg:h-6 lg:w-px lg:bg-gray-900/10","aria-hidden":"true"},null,-1),wt=t("span",{class:"sr-only"},"Open user menu",-1),$t={class:"hidden lg:flex lg:items-center"},kt={class:"ml-4 text-sm font-semibold leading-6 text-gray-900","aria-hidden":"true"},Mt=t("main",{class:"xl:pl-96"},[t("div",{class:"px-4 py-10 sm:px-6 lg:px-8 lg:py-6"})],-1),Dt={class:"fixed bottom-0 left-20 top-16 hidden w-96 border-r border-gray-200 px-4 py-6 sm:px-6 lg:px-8 xl:block animate__animated animate__fadeIn"},St={id:"driver-list",class:"mt-8 w-full overflow-y-auto bg-white h-40 shadow-lg rounded-md transition-all ease-in-out duration-300"},It=t("p",null,"Devices",-1),Ct=["onClick"],Tt={key:0,class:"flex p-4 cursor-pointer items-center"},Ot={class:"mr-2 text-gray-500 text-sm"},At=t("div",{class:"flex items-center justify-center rounded-full h-[40px] w-[40px] bg-gray-400 text-white"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"})])],-1),Et={class:"flex-auto ml-2"},jt={class:"text-sm"},Lt=t("path",{"fill-rule":"evenodd",d:"M3.75 6.75a3 3 0 00-3 3v6a3 3 0 003 3h15a3 3 0 003-3v-.037c.856-.174 1.5-.93 1.5-1.838v-2.25c0-.907-.644-1.664-1.5-1.837V9.75a3 3 0 00-3-3h-15zm15 1.5a1.5 1.5 0 011.5 1.5v6a1.5 1.5 0 01-1.5 1.5h-15a1.5 1.5 0 01-1.5-1.5v-6a1.5 1.5 0 011.5-1.5h15zM4.5 9.75a.75.75 0 00-.75.75V15c0 .414.336.75.75.75H18a.75.75 0 00.75-.75v-4.5a.75.75 0 00-.75-.75H4.5z","clip-rule":"evenodd"},null,-1),Nt=[Lt],zt={key:0,class:"absolute right-0 left-0 bottom-0 pb-4"},Bt={class:"w-[300px] mx-auto shadow-md rounded-md"},Ht={class:"p-4 bg-white"},Ft={class:"flex"},Rt={class:"flex-auto"},Ut=t("span",{class:"sr-only"},"Close device",-1),Kt=t("br",null,null,-1),Yt={class:"flex my-2"},Gt=t("p",{class:"text-sm flex-1"},"Speed:",-1),Vt={class:"text-sm flex-1 text-gray-400"},Zt={class:"flex my-2"},Pt=t("p",{class:"text-sm flex-1"},"Total Distance:",-1),Wt={class:"text-sm flex-1 text-gray-400"},Jt={class:"flex my-2"},qt=t("p",{class:"text-sm flex-1"},"Accuracy:",-1),Xt={class:"text-sm flex-1 text-gray-400"},is=Object.assign({layout:Re},{__name:"Dashboard",props:["devices","driver","drivers"],setup(w){const a=w,{positions:o,devices:b}=Ve(),y=V(null),p=V(null),S=[];V(-1);const I=he(),_=ne(()=>I.props.auth.user),h=ne(()=>he().url),{navigation:$,userNavigation:v}=Se(),k=V(!1);let C=V(!0);setTimeout(function(){var m,r;let d=document.getElementById("driver-list");(m=d==null?void 0:d.classList)==null||m.remove("h-40"),(r=d==null?void 0:d.classList)==null||r.add("h-[85%]"),C.value=!1},1e3);const j=new q({apiKey:"AIzaSyAir29_hRhb99ll83YjLarlSbj-9su5zXI",version:"weekly"}),H=[{featureType:"administrative.land_parcel",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi.park",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]}],P=Ge,U=ne(()=>a.devices.map(m=>{const r=o.value.find(g=>g.deviceId===m.id);return{position:{lat:r==null?void 0:r.latitude,lng:r==null?void 0:r.longitude},title:m.name,status:m.status,positionData:r,deviceData:m}})),K=ne(()=>L.value?U.value.find(d=>d.deviceData.id==L.value):!1);V([]),$e(U,(d,m)=>{p.value&&d.forEach((r,g)=>{let f=r.position;S[g].setPosition(f)})});let L=V(!1);function G(){j.load().then(async()=>{p.value=new window.google.maps.Map(y.value,{center:{lat:.297784,lng:32.544896},zoom:9,mapTypeId:"roadmap",styles:H,streetViewControl:!1,mapTypeControl:!1}),U.value.forEach((d,m)=>{const r=new google.maps.Marker({position:d.position,map:p.value,title:d.title,deviceId:d.deviceData.id,icon:{url:P,scaledSize:new google.maps.Size(40,40)},clickable:!0,draggable:!1});r.set("markerData",d),S.push(r),r.addListener("click",()=>{L.value=d.deviceData.id,A(d.position.lat,d.position.lng)});const g=new google.maps.LatLngBounds;U.value.forEach(X=>{g.extend(X.position)});const f=150;p.value.fitBounds(g,f)})})}function A(d,m){p.value.setZoom(12),setTimeout(function(){p.value.panTo({lat:d,lng:m}),p.value.setZoom(15)},400)}return xe(()=>{G()}),(d,m)=>(z(),Y(ie,null,[T(M(ke),{title:"Dashboard"}),t("div",Ze,[t("div",Pe,[t("div",{ref_key:"mapContainer",ref:y,id:"map",class:"h-full w-full"},null,512)]),We,t("div",Je,[T(M(Te),{as:"template",show:k.value},{default:B(()=>[T(M(Ie),{as:"div",class:"relative z-50 lg:hidden",onClose:m[1]||(m[1]=r=>k.value=!1)},{default:B(()=>[T(M(ue),{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:B(()=>[qe]),_:1}),t("div",Xe,[T(M(ue),{as:"template",enter:"transition ease-in-out duration-300 transform","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300 transform","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:B(()=>[T(M(Ce),{class:"relative mr-16 flex w-full max-w-xs flex-1"},{default:B(()=>[T(M(ue),{as:"template",enter:"ease-in-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:B(()=>[t("div",Qe,[t("button",{type:"button",class:"-m-2.5 p-2.5",onClick:m[0]||(m[0]=r=>k.value=!1)},[et,T(M(ve),{class:"h-6 w-6 text-white","aria-hidden":"true"})])])]),_:1}),t("div",tt,[st,t("nav",it,[t("ul",rt,[(z(!0),Y(ie,null,oe(M($),r=>(z(),Y("li",{key:r.name},[T(M(le),{href:r.href,class:re([r.current?"bg-gray-800 text-white":"text-gray-400 hover:text-white hover:bg-gray-800","group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold"])},{default:B(()=>[(z(),ce(ge(r.icon),{class:"h-6 w-6 shrink-0","aria-hidden":"true"})),me(" "+F(r.name),1)]),_:2},1032,["href","class"])]))),128))])])])]),_:1})]),_:1})])]),_:1})]),_:1},8,["show"]),t("div",at,[nt,t("nav",ot,[t("ul",lt,[(z(!0),Y(ie,null,oe(M($),r=>(z(),Y("li",{key:r.name},[T(M(le),{href:r.href,class:re([r.href.endsWith(h.value)?"bg-black bg-opacity-30 text-red":"text-gray-400 hover:text-white hover:bg-black hover:bg-opacity-20","group flex gap-x-3 rounded-md p-3 text-sm leading-6 font-semibold"])},{default:B(()=>[(z(),ce(ge(r.icon),{class:"h-6 w-6 shrink-0","aria-hidden":"true"})),t("span",ct,F(r.name),1)]),_:2},1032,["href","class"])]))),128))])])]),t("div",ut,[t("div",dt,[t("button",{type:"button",class:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:m[2]||(m[2]=r=>k.value=!0)},[ht,T(M(Oe),{class:"h-6 w-6","aria-hidden":"true"})]),ft,t("div",pt,[t("form",gt,[mt,T(M(Ae),{class:"pointer-events-none absolute inset-y-0 left-0 h-full w-5 text-gray-400","aria-hidden":"true"}),vt]),t("div",yt,[t("button",_t,[xt,T(M(Ee),{class:"h-6 w-6","aria-hidden":"true"})]),bt,T(M(Be),{as:"div",class:"relative"},{default:B(()=>[T(M(je),{class:"-m-1.5 flex items-center p-1.5"},{default:B(()=>[wt,t("span",$t,[t("span",kt,F(_.value.name),1),T(M(Le),{class:"ml-2 h-5 w-5 text-gray-400","aria-hidden":"true"})])]),_:1}),T(Me,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:B(()=>[T(M(Ne),{class:"absolute right-0 z-10 mt-2.5 w-32 origin-top-right rounded-md bg-white py-2 shadow-lg ring-1 ring-gray-900/5 focus:outline-none"},{default:B(()=>[(z(!0),Y(ie,null,oe(M(v),r=>(z(),ce(M(ze),{key:r.name},{default:B(({active:g})=>[T(M(le),{href:r.href,class:re([g?"bg-gray-50":"","block px-3 py-1 text-sm leading-6 text-gray-900"])},{default:B(()=>[me(F(r.name),1)]),_:2},1032,["href","class"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])])]),Mt]),t("aside",Dt,[t("div",St,[It,(z(!0),Y(ie,null,oe(U.value,(r,g)=>(z(),Y("div",{onClick:f=>{fe(L)?L.value=r.deviceData.id:L=r.deviceData.id,A(r.positionData.latitude,r.positionData.longitude)}},[r.title.toLowerCase()!=="ivan tracker"&&r.positionData?(z(),Y("div",Tt,[t("p",Ot,F(g),1),At,t("div",Et,[t("p",jt,F(r.title),1),t("p",{class:re(["text-sm font-bold",r.status.toLowerCase()==="online"?"text-green-500":"text-red-600"])},F(r.status.toLowerCase()!=="online"?"Parked":"Online"),3)]),t("div",null,[(z(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:re(["w-6 h-6",r.positionData.attributes.batteryLevel>50?"text-green-400":"text-orange-400"])},Nt,2)),t("small",null,F(r.positionData.attributes.batteryLevel)+F(r.positionData.attributes.batteryLevel?"%":""),1)])])):pe("",!0)],8,Ct))),256))])])]),K.value?(z(),Y("div",zt,[t("div",Bt,[t("div",Ht,[t("div",Ft,[t("p",Rt,F(K.value.title),1),t("button",{type:"button",class:"-m-2.5 p-2.5",onClick:m[3]||(m[3]=r=>fe(L)?L.value=!1:L=!1)},[Ut,T(M(ve),{class:"h-6 w-6 text-gray-500","aria-hidden":"true"})])]),Kt,t("div",Yt,[Gt,t("p",Vt,F(K.value.positionData.speed),1)]),t("div",Zt,[Pt,t("p",Wt,F((K.value.positionData.attributes.totalDistance/1e3).toFixed(2))+" Km",1)]),t("div",Jt,[qt,t("p",Xt,F(K.value.positionData.accuracy.toFixed(1)),1)])])])])):pe("",!0)])],64))}});export{is as default};
